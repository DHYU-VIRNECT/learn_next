(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{4771:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camera/[id]",function(){return r(9307)}])},9068:function(n,e,r){"use strict";var t=r(5893),a=r(7294),i=r(5675),o=r.n(i),c=r(1664),u=r.n(c),s=r(7898),l=r.n(s),f=r(7166),d=r.n(f)().bind(l()),m=function(n){var e=n.id,r=n.image,a=n.num,i=n.className;return(0,t.jsx)(u(),{href:"/camera/".concat(e),children:(0,t.jsx)("a",{children:(0,t.jsxs)("div",{className:d("container",i),children:[(0,t.jsx)("div",{className:d("thumbnail"),children:(0,t.jsx)(o(),{src:r,layout:"fill",alt:""})}),(0,t.jsx)("div",{className:d("description"),children:(0,t.jsx)("p",{className:"camera-num",children:a})})]})})})};e.Z=a.memo(m)},9307:function(n,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return L},default:function(){return X}});var t=r(5893),a=r(7294),i=r(9473),o=r(3455);var c=function(n,e,r,t){var a=function(n){return e=n,(null!=(t=r)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)?n:new r((function(e){e(n)}));var e,t};return new(r||(r=Promise))((function(r,i){var o=function(n){try{u(t.next(n))}catch(e){i(e)}},c=function(n){try{u(t.throw(n))}catch(e){i(e)}},u=function(n){n.done?r(n.value):a(n.value).then(o,c)};u((t=t.apply(n,e||[])).next())}))},u=function(n,e){var r,t,a,i,o=function(n){return function(e){return c([n,e])}},c=function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,t&&(a=2&i[0]?t.return:i[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,i[1])).done)return a;switch(t=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,t=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){u.label=i[1];break}if(6===i[0]&&u.label<a[1]){u.label=a[1],a=i;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(i);break}a[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(n,u)}catch(o){i=[6,o],t=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}},u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=r(2895),l=r.n(s),f=r(7166),d=r.n(f),m=r(3741),v=r.n(m),h=d().bind(v()),p=function(n){var e=n.text;return(0,t.jsx)("div",{className:h("container"),children:(0,t.jsx)("span",{className:h("text"),children:e})})},b=a.memo(p),_=d().bind(l()),y=function(){var n=function(){var n=(0,a.useState)(!0),e=n[0],r=n[1],t=(0,a.useState)(),s=t[0],l=t[1],f=(0,a.useRef)(null),d=(0,i.v9)(o.SK);(0,a.useEffect)((function(){f.current&&(d||l("\ud574\ub2f9 \uce74\uba54\ub77c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),l(""),m())}),[d]);var m=(0,a.useCallback)((function(){return c(void 0,void 0,void 0,(function(){var n,e;return u(this,(function(t){switch(t.label){case 0:n=navigator.mediaDevices,t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,n.getUserMedia({video:!0})];case 2:return e=t.sent(),v(e),[3,5];case 3:return t.sent(),h(),[3,5];case 4:return r(!1),[7];case 5:return[2]}}))}))}),[]),v=(0,a.useCallback)((function(n){var e=f.current;e.muted=!0,e.srcObject=n,e.onloadedmetadata=function(){e.play()}}),[f.current]),h=(0,a.useCallback)((function(){l("\uc7a5\ube44 \ud639\uc740 \uad8c\ud55c \ubb38\uc81c\ub85c \uc601\uc0c1\uc744 \uc7ac\uc0dd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")}),[]);return{videoRef:f,isLoading:e,errorMessage:s,cameraNum:null===d||void 0===d?void 0:d.num}}(),e=n.videoRef,r=n.isLoading,s=n.errorMessage,l=n.cameraNum;return(0,t.jsxs)("div",{className:_("container"),children:[(0,t.jsx)("video",{ref:e,className:_("video")}),"number"===typeof l&&(0,t.jsxs)("p",{className:_("title"),children:[l,"\ubc88 \uce74\uba54\ub77c"]}),r&&(0,t.jsx)(b,{text:"\uc811\uadfc \uad8c\ud55c\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694"}),!r&&s&&(0,t.jsx)(b,{text:s})]})},x=r(7199),j=r.n(x),w=d().bind(j()),g=function(){return(0,t.jsx)("div",{className:w("container"),children:(0,t.jsx)(y,{})})},N=r(6756),C=r.n(N),S=r(9068),k=r(6853),O=r.n(k),P=r(4333),E=function(){return E=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n},E.apply(this,arguments)},D=d().bind(O()),R=function(){var n=function(){var n=(0,i.v9)(P.DH),e=(0,i.v9)(o.SK);return{cameras:(0,a.useMemo)((function(){return n.map((function(n){return E(E({},n),{isCurrentCamera:n.id===(null===e||void 0===e?void 0:e.id)})}))}),[n,e])}}().cameras;return(0,t.jsxs)("div",{className:D("container"),children:[(0,t.jsx)("p",{className:D("title"),children:"\ub2e4\ub978 \uce74\uba54\ub77c \ud655\uc778\ud558\uae30"}),(0,t.jsx)("div",{className:D("cameras"),children:n.map((function(n){return(0,t.jsx)(S.Z,{id:n.id,num:n.num,image:n.image,className:D({"current-camera":n.isCurrentCamera})},n.id)}))})]})},M=r(1163),I=r(6524),V=r(8767),Q=r(1811);function Z(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function H(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})))),t.forEach((function(e){Z(n,e,r[e])}))}return n}var T=function(n,e){return function(r){return r.errorCode?(0,t.jsx)(e,{errorCode:r.errorCode}):(0,t.jsx)(Q.Z,{fallback:(0,t.jsx)(e,{}),children:(0,t.jsx)(n,H({},r))})}},U=r(8872),G=d().bind(C()),q=function(){var n=(0,i.I0)(),e=(0,M.useRouter)().query.id,r=(0,V.useQuery)(["camera",e],(function(){return K(e)})).data,t=(0,V.useQuery)("cameras",I.s).data;(0,a.useEffect)((function(){n((0,o._n)(r)),n((0,P.oe)(t))}),[r,n])},K=function(n){return n?(0,I.b)(+n):null},L=!0,X=T((function(){return q(),(0,t.jsxs)("div",{className:G("container"),children:[(0,t.jsx)(g,{}),(0,t.jsx)(R,{})]})}),(function(n){var e=n.errorCode;return(0,t.jsx)(U.Z,{errorMessages:{403:"\ud574\ub2f9 \uce74\uba54\ub77c\uc5d0 \uc811\uadfc \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",404:"\ud574\ub2f9 \uce74\uba54\ub77c\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"},errorCode:e})}))},6524:function(n,e,r){"use strict";r.d(e,{b:function(){return u},s:function(){return c}});var t=r(9669),a=r.n(t);var i=function(n,e,r,t){var a=function(n){return e=n,(null!=(t=r)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)?n:new r((function(e){e(n)}));var e,t};return new(r||(r=Promise))((function(r,i){var o=function(n){try{u(t.next(n))}catch(e){i(e)}},c=function(n){try{u(t.throw(n))}catch(e){i(e)}},u=function(n){n.done?r(n.value):a(n.value).then(o,c)};u((t=t.apply(n,e||[])).next())}))},o=function(n,e){var r,t,a,i,o=function(n){return function(e){return c([n,e])}},c=function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,t&&(a=2&i[0]?t.return:i[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,i[1])).done)return a;switch(t=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,t=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){u.label=i[1];break}if(6===i[0]&&u.label<a[1]){u.label=a[1],a=i;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(i);break}a[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(n,u)}catch(o){i=[6,o],t=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}},u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},c=function(){return i(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,a().get("http://localhost:3000/api/camera")];case 1:return[2,n.sent().data]}}))}))},u=function(n){return i(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,a().get("http://localhost:3000/api/camera/".concat(n))];case 1:return[2,e.sent().data]}}))}))}},2895:function(n){n.exports={container:"CameraVideo_container__sURQU",video:"CameraVideo_video__CDiha",title:"CameraVideo_title__U6aRH"}},7898:function(n){n.exports={container:"Camera_container__sIRdQ",thumbnail:"Camera_thumbnail__kHxf9",description:"Camera_description__so_qf"}},3741:function(n){n.exports={container:"VideoOverlay_container___DaSM",text:"VideoOverlay_text__Dv58b"}},6853:function(n){n.exports={container:"CameraNavigation_container__cS_DQ",title:"CameraNavigation_title__BOkfa",cameras:"CameraNavigation_cameras__ZDa_R","current-camera":"CameraNavigation_current-camera__9VFM_"}},7199:function(n){n.exports={container:"CameraPlayer_container__pmmGh"}},6756:function(n){n.exports={container:"CameraPage_container__Hx_9v"}},1163:function(n,e,r){n.exports=r(880)}},function(n){n.O(0,[713,774,888,179],(function(){return e=4771,n(n.s=e);var e}));var e=n.O();_N_E=e}]);